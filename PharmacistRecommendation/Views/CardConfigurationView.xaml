<?xml version="1.0" encoding="utf-8" ?>
<ContentPage  
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="PharmacistRecommendation.Views.CardConfigurationView"
    Padding="24,20,24,24"
    BackgroundColor="#F8F9FA">

    <Grid RowDefinitions="Auto,*,Auto" RowSpacing="10">

        <StackLayout Grid.Row="0" Spacing="4">
            <Label 
                Text="Adăugare card pacient"
                FontSize="24"
                FontAttributes="None"
                FontFamily="SegoeUI"
                HorizontalOptions="Center"
                TextColor="#1A1A1A"
                Margin="0,8,0,4" />
            <BoxView 
                HeightRequest="2"
                WidthRequest="60"
                BackgroundColor="#E3F2FD"
                HorizontalOptions="Center"
                CornerRadius="1" />
        </StackLayout>

        <Border Grid.Row="1"
                Stroke="#E8EAED"
                StrokeThickness="1"
                StrokeShape="RoundRectangle 16"
                BackgroundColor="White"
                Padding="24"
                Shadow="{OnPlatform 
                    Default='0,2,8,0,#10000000',
                    iOS='0,1,4,0,#15000000'}">

            <ScrollView>
                <Grid ColumnDefinitions="*,*" 
                      RowDefinitions="Auto,Auto,Auto,Auto,Auto"
                      RowSpacing="20" 
                      ColumnSpacing="28">

                    <StackLayout Grid.Row="0" Grid.Column="0" Spacing="6">
                        <Label Text="Număr card" 
                               FontSize="14" 
                               FontAttributes="None"
                               TextColor="#424242"
                               Margin="2,0,0,0"/>
                        <Border Stroke="#D1D5DB"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                BackgroundColor="#FAFBFC">
                            <Entry Placeholder="Introduceți nr. card" 
                                   Text="{Binding CardNumber}"
                                   FontSize="15"
                                   TextColor="#1F2937"
                                   PlaceholderColor="#9CA3AF"
                                   BackgroundColor="Transparent"
                                   Margin="12,8"/>
                        </Border>
                    </StackLayout>

                    <StackLayout Grid.Row="0" Grid.Column="1" Spacing="6">
                        <Label Text="Nume pacient" 
                               FontSize="14" 
                               FontAttributes="None"
                               TextColor="#424242"
                               Margin="2,0,0,0"/>
                        <Border Stroke="#D1D5DB"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                BackgroundColor="#FAFBFC">
                            <Entry Placeholder="Nume de familie" 
                                   Text="{Binding LastName}"
                                   FontSize="15"
                                   TextColor="#1F2937"
                                   PlaceholderColor="#9CA3AF"
                                   BackgroundColor="Transparent"
                                   Margin="12,8"/>
                        </Border>
                    </StackLayout>

                    <StackLayout Grid.Row="1" Grid.Column="1" Spacing="6">
                        <Label Text="Prenume pacient" 
                               FontSize="14" 
                               FontAttributes="None"
                               TextColor="#424242"
                               Margin="2,0,0,0"/>
                        <Border Stroke="#D1D5DB"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                BackgroundColor="#FAFBFC">
                            <Entry Placeholder="Prenume" 
                                   Text="{Binding FirstName}"
                                   FontSize="15"
                                   TextColor="#1F2937"
                                   PlaceholderColor="#9CA3AF"
                                   BackgroundColor="Transparent"
                                   Margin="12,8"/>
                        </Border>
                    </StackLayout>

                    <StackLayout Grid.Row="1" Grid.Column="0" Spacing="6">
                        <Label Text="CNP" 
                               FontSize="14" 
                               FontAttributes="None"
                               TextColor="#424242"
                               Margin="2,0,0,0"/>
                        <Border Stroke="#D1D5DB"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                BackgroundColor="#FAFBFC">
                            <Entry Placeholder="Cod numeric personal" 
                                   Text="{Binding Cnp}" 
                                   Keyboard="Numeric"
                                   FontSize="15"
                                   TextColor="#1F2937"
                                   PlaceholderColor="#9CA3AF"
                                   BackgroundColor="Transparent"
                                   Margin="12,8"/>
                        </Border>
                    </StackLayout>

                    <StackLayout Grid.Row="2" Grid.Column="0" Spacing="6">
                        <Label Text="CID" 
                               FontSize="14" 
                               FontAttributes="None"
                               TextColor="#424242"
                               Margin="2,0,0,0"/>
                        <Grid ColumnDefinitions="*,Auto" ColumnSpacing="8">
                            <Border Stroke="#D1D5DB"
                                    StrokeThickness="1"
                                    StrokeShape="RoundRectangle 8"
                                    BackgroundColor="#F3F4F6"
                                    Grid.Column="0">
                                <Entry Placeholder="CID (autogenerat)" 
                                       Text="{Binding Cid}" 
                                       IsReadOnly="False"
                                       FontSize="15"
                                       TextColor="#6B7280"
                                       PlaceholderColor="#9CA3AF"
                                       BackgroundColor="Transparent"
                                       Margin="12,8"/>
                            </Border>
                            <Button Text="Generează"
                                    Grid.Column="1"
                                    Command="{Binding GenerateCidCommand}"
                                    FontSize="13"
                                    WidthRequest="95"
                                    HeightRequest="44"
                                    BackgroundColor="#4F46E5"
                                    TextColor="White"
                                    CornerRadius="8"
                                    Shadow="{OnPlatform 
                                        Default='0,1,3,0,#20000000',
                                        iOS='0,1,2,0,#25000000'}"/>
                        </Grid>
                    </StackLayout>

                    <StackLayout Grid.Row="2" Grid.Column="1" Spacing="6">
                        <Label Text="Telefon" 
                               FontSize="14" 
                               FontAttributes="None"
                               TextColor="#424242"
                               Margin="2,0,0,0"/>
                        <Border Stroke="#D1D5DB"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                BackgroundColor="#FAFBFC">
                            <Entry Placeholder="Număr de telefon" 
                                   Text="{Binding Phone}" 
                                   Keyboard="Telephone"
                                   FontSize="15"
                                   TextColor="#1F2937"
                                   PlaceholderColor="#9CA3AF"
                                   BackgroundColor="Transparent"
                                   Margin="12,8"/>
                        </Border>
                    </StackLayout>

                    <StackLayout Grid.Row="3" Grid.Column="0" Spacing="6">
                        <Label Text="Email" 
                               FontSize="14" 
                               FontAttributes="None"
                               TextColor="#424242"
                               Margin="2,0,0,0"/>
                        <Border Stroke="#D1D5DB"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                BackgroundColor="#FAFBFC">
                            <Entry Placeholder="Adresă de email" 
                                   Text="{Binding Email}" 
                                   Keyboard="Email"
                                   FontSize="15"
                                   TextColor="#1F2937"
                                   PlaceholderColor="#9CA3AF"
                                   BackgroundColor="Transparent"
                                   Margin="12,8"/>
                        </Border>
                    </StackLayout>

                    <StackLayout Grid.Row="3" Grid.Column="1" Spacing="6">
                        <Label Text="Data nașterii" 
           FontSize="14" 
           TextColor="#424242"
           Margin="2,0,0,0"/>
                        <Border Stroke="#D1D5DB"
            StrokeThickness="1"
            StrokeShape="RoundRectangle 8"
            BackgroundColor="#FAFBFC">
                            <Entry Text="{Binding BirthdateString}" 
               Placeholder="dd/MM/yyyy"
               FontSize="15"
               TextColor="#1F2937"
               BackgroundColor="Transparent"
               Margin="12,8"/>
                        </Border>
                    </StackLayout>


                    <StackLayout Grid.Row="4" Grid.Column="0" Spacing="6">
                        <Label Text="Gen" 
                               FontSize="14" 
                               FontAttributes="None"
                               TextColor="#424242"
                               Margin="2,0,0,0"/>
                        <Border Stroke="#D1D5DB"
                                StrokeThickness="1"
                                StrokeShape="RoundRectangle 8"
                                BackgroundColor="#FAFBFC">
                            <Picker SelectedItem="{Binding Gender}"
                                    FontSize="15"
                                    TextColor="#1F2937"
                                    BackgroundColor="Transparent"
                                    Margin="12,8">
                                <Picker.Items>
                                    <x:String>Feminin</x:String>
                                    <x:String>Masculin</x:String>
                                </Picker.Items>
                            </Picker>
                        </Border>
                    </StackLayout>

                </Grid>
            </ScrollView>
        </Border>

        <HorizontalStackLayout 
            Grid.Row="2"
            Spacing="16"
            HorizontalOptions="Center"
            Margin="0,8,0,0">

            <Button Text="Card nou"
            FontSize="15"
            FontAttributes="None"
            Command="{Binding NewCardCommand}"
            BackgroundColor="#4F46E5"
            TextColor="White"
            CornerRadius="10"
            WidthRequest="120"
            HeightRequest="48"/>
            
            <Button Text="Printează"
                    FontSize="15"
                    FontAttributes="None"
                    BackgroundColor="#1565C0"
                    TextColor="White"
                    CornerRadius="10"
                    WidthRequest="120"
                    HeightRequest="48"
                    Command="{Binding PrintCommand}"
                    IsEnabled="{Binding IsPrintButtonEnabled}"
                    Shadow="{OnPlatform 
                        Default='0,2,8,0,#301565C0',
                        iOS='0,1,4,0,#351565C0'}"/>

            <Button Text="Salvează"
                    FontSize="15"
                    FontAttributes="None"
                    Command="{Binding SaveCommand}"
                    BackgroundColor="#2E7D32"
                    TextColor="White"
                    CornerRadius="10"
                    WidthRequest="120"
                    HeightRequest="48"
                    Shadow="{OnPlatform 
                        Default='0,2,8,0,#302E7D32',
                        iOS='0,1,4,0,#352E7D32'}"/>

            <Label Text="{Binding ValidationMessage}"
                   TextColor="Red"
                   Margin="0,10,0,0"/>
        </HorizontalStackLayout>

    </Grid>
</ContentPage>